{% extends 'base.html' %}

{% block title %}Sign Up - Budget Planner{% endblock %}

{% block extra_css %}
<style>
  .signup-container {
    min-height: 80vh;
    display: flex;
    align-items: center;
    padding: 2rem 0;
  }

  .signup-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fc 100%);
    border: none;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  .signup-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    text-align: center;
  }

  .signup-header h3 {
    margin: 0;
    font-weight: 700;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }

  .form-control,
  .form-select {
    border-radius: 15px;
    border: 2px solid rgba(102, 126, 234, 0.1);
    transition: all 0.3s ease;
    padding: 0.75rem 1rem;
  }

  .form-control:focus,
  .form-select:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    transform: translateY(-1px);
  }

  .btn-modern {
    border-radius: 25px;
    padding: 12px 24px;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border: none;
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .btn-modern:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
  }

  .btn-modern::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .btn-modern:hover::before {
    left: 100%;
  }

  .form-label {
    font-weight: 600;
    color: #667eea;
    margin-bottom: 0.5rem;
  }

  .error-text {
    color: #fc466b;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .success-text {
    color: #11998e;
    font-size: 0.875rem;
  }

  .login-link {
    text-align: center;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid rgba(102, 126, 234, 0.1);
  }

  .login-link a {
    color: #667eea;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .login-link a:hover {
    color: #764ba2;
    text-decoration: underline;
  }
</style>
{% endblock %} {% block content %}
<div class="signup-container">
  <div class="row justify-content-center w-100">
    <div class="col-md-8 col-lg-6">
      <div class="card signup-card">
        <div class="signup-header">
          <h3><i class="fas fa-user-plus"></i> Create Your Account</h3>
          <p class="mb-0 opacity-75">Join us to start managing your finances</p>
        </div>
        <div class="card-body p-4">
          <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}

            <div class="row">
              <div class="col-md-6 mb-3">
                <label
                  for="{{ form.first_name.id_for_label }}"
                  class="form-label"
                  >First Name *</label
                >
                {{ form.first_name }} {% if form.first_name.errors %}
                <div class="invalid-feedback d-block">
                  {{ form.first_name.errors }}
                </div>
                {% endif %}
              </div>
              <div class="col-md-6 mb-3">
                <label
                  for="{{ form.last_name.id_for_label }}"
                  class="form-label"
                  >Last Name *</label
                >
                {{ form.last_name }} {% if form.last_name.errors %}
                <div class="invalid-feedback d-block">
                  {{ form.last_name.errors }}
                </div>
                {% endif %}
              </div>
            </div>

            <div class="mb-3">
              <label for="{{ form.username.id_for_label }}" class="form-label"
                >Username *</label
              >
              {{ form.username }} {% if form.username.errors %}
              <div class="invalid-feedback d-block">
                {{ form.username.errors }}
              </div>
              {% endif %}
              <div class="form-text">
                Required. 150 characters or fewer. Letters, digits and @/./+/-/_
                only.
              </div>
            </div>

            <div class="mb-3">
              <label for="{{ form.email.id_for_label }}" class="form-label"
                >Email Address *</label
              >
              {{ form.email }} {% if form.email.errors %}
              <div class="invalid-feedback d-block">
                {{ form.email.errors }}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.password1.id_for_label }}" class="form-label"
                >Password *</label
              >
              {{ form.password1 }} {% if form.password1.errors %}
              <div class="invalid-feedback d-block">
                {{ form.password1.errors }}
              </div>
              {% endif %}
              <div class="form-text">
                • Your password can't be too similar to your other personal
                information.<br />
                • Your password must contain at least 8 characters.<br />
                • Your password can't be a commonly used password.<br />
                • Your password can't be entirely numeric.
              </div>
            </div>

            <div class="mb-3">
              <label for="{{ form.password2.id_for_label }}" class="form-label"
                >Confirm Password *</label
              >
              {{ form.password2 }} {% if form.password2.errors %}
              <div class="invalid-feedback d-block">
                {{ form.password2.errors }}
              </div>
              {% endif %}
              <div class="form-text">
                Enter the same password as before, for verification.
              </div>
            </div>

            {% if form.non_field_errors %}
            <div class="alert alert-danger">{{ form.non_field_errors }}</div>
            {% endif %}

            <div class="d-grid mt-4">
              <button
                type="submit"
                class="btn btn-primary btn-modern"
                style="
                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                "
              >
                <i class="fas fa-user-plus"></i> Create Account
              </button>
            </div>
          </form>

          <div class="login-link">
            <p class="mb-2">
              Already have an account?
              <a href="{% url 'login' %}">Login here</a>
            </p>
            <p class="mb-0">
              <a href="{% url 'landing' %}"
                ><i class="fas fa-arrow-left"></i> Back to Home</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  // Form validation
  (function () {
    "use strict";
    window.addEventListener(
      "load",
      function () {
        var forms = document.getElementsByClassName("needs-validation");
        var validation = Array.prototype.filter.call(forms, function (form) {
          form.addEventListener(
            "submit",
            function (event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add("was-validated");
            },
            false
          );
        });
      },
      false
    );
  })();

  // Password confirmation validation
  document.addEventListener("DOMContentLoaded", function () {
    const password1 = document.getElementById("id_password1");
    const password2 = document.getElementById("id_password2");

    function validatePassword() {
      if (password1.value !== password2.value) {
        password2.setCustomValidity("Passwords don't match");
      } else {
        password2.setCustomValidity("");
      }
    }

    if (password1 && password2) {
      password1.addEventListener("change", validatePassword);
      password2.addEventListener("keyup", validatePassword);
    }
  });
</script>
{% endblock %}
